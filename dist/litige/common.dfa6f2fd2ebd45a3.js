"use strict";(self.webpackChunkLitige=self.webpackChunkLitige||[]).push([[592],{4554:(x,E,i)=>{i.r(E),i.d(E,{DisputeComponent:()=>Z});var m=i(6895),n=i(4006),e=i(3546),v=i(9549),h=i(4144),D=i(7957),g=i(4859),o=i(7392),l=i(8675),a=i(4004),t=i(4650),c=i(9299),O=i(529),u=i(3238);function C(_,f){if(1&_&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&_){const d=f.$implicit;t.Q6J("value",d),t.xp6(1),t.Oqu(d)}}function M(_,f){if(1&_){const d=t.EpF();t.TgZ(0,"div")(1,"mat-card-content")(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"mat-card-actions")(10,"button",11),t.NdJ("click",function(){t.CHM(d);const r=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.openDisputeDialog(r))}),t._uU(11,"View Details"),t.qZA(),t.TgZ(12,"button",11),t.NdJ("click",function(){t.CHM(d);const r=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.deleteDispute(r.numeroCommande))}),t._uU(13,"Delete"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){t.CHM(d);const r=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.editDispute(r))}),t._uU(15,"Edit"),t.qZA()()()}if(2&_){const d=t.oxw().$implicit;t.xp6(3),t.hij("description: ",d.description,""),t.xp6(2),t.hij("status: ",d.status,""),t.xp6(2),t.hij("createdAt: ",t.xi3(8,3,d.opened_at,"short"),"")}}function P(_,f){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,M,16,6,"div",8),t.qZA()),2&_){const d=f.$implicit,s=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",d.clientid===s.id)}}function A(_,f){if(1&_){const d=t.EpF();t.TgZ(0,"div")(1,"mat-card-actions",12)(2,"button",13),t.NdJ("click",function(){t.CHM(d);const r=t.oxw(2);return t.KtG(r.expand())}),t.TgZ(3,"mat-icon"),t._uU(4,"expand_more"),t.qZA()()()()}}function y(_,f){if(1&_&&(t.TgZ(0,"div")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA()(),t.TgZ(6,"mat-card",10),t.YNc(7,P,2,1,"div",7),t.YNc(8,A,5,0,"div",8),t.qZA()()),2&_){const d=f.$implicit,s=t.oxw();t.xp6(3),t.hij("Client Name :",d.name," "),t.xp6(2),t.hij("Client Email: ",d.email,""),t.xp6(2),t.Q6J("ngForOf",s.litiges),t.xp6(1),t.Q6J("ngIf",!s.bool)}}function U(_,f){if(1&_){const d=t.EpF();t.TgZ(0,"div")(1,"mat-card-actions",12)(2,"button",13),t.NdJ("click",function(){t.CHM(d);const r=t.oxw();return t.KtG(r.ngOnInit())}),t.TgZ(3,"mat-icon"),t._uU(4,"expand_less"),t.qZA()()()()}}let Z=(()=>{const f=class{constructor(s,r,p){this.router=s,this.http=r,this.routes=p,this.litiges=[],this.clients=[],this.bool=!1,this.clienttNames=[],this.searchTerm="",this.myControl=new n.NI(""),this.client=[]}ngOnInit(){let s;this.id=this.routes.snapshot.paramMap.get("id"),s=this.id?`http://127.0.0.1:5000/litige/${this.id}`:"http://127.0.0.1:5000/litige",console.log("link to show filter",s),this.bool=!1,this.filtered=this.myControl.valueChanges.pipe((0,l.O)(""),(0,a.U)(r=>this._filter(r||""))),this.http.get(s,{withCredentials:!0}).subscribe({next:r=>{this.api=r,this.litiges=this.api.litiges,this.client=this.api.clients,this.clienttNames=this.client.map(p=>p.description),this.clients=this.api.client,console.log("anything",this.litiges),console.log("eaea",this.clients)},error:r=>{console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es",r)}})}openDisputeDialog(s){console.log("Ouvrir le dialogue pour le litige:",s)}deleteDispute(s){console.log("Supprimer le litige avec l'ID:",s)}editDispute(s){console.log("\xc9diter le litige:",s),this.router.navigate(["/edit"],{state:{litige:s}})}expand(){let s;s=this.id?`http://127.0.0.1:5000/litige/${this.id}/all`:"http://127.0.0.1:5000/litige/all",this.bool=!0,this.http.get(s,{withCredentials:!0}).subscribe({next:r=>{this.api=r,this.litiges=this.api.litiges,this.clients=this.api.client,console.log(this.litiges),console.log(this.clients)}})}_filter(s){const r=s.toLowerCase();return this.clienttNames.filter(p=>p.toLowerCase().includes(r))}transfer(){const r=`http://127.0.0.1:5000/litige/${this.id}/${this.myControl.value}`;console.log("url to search",r),this.http.get(r,{withCredentials:!0}).subscribe({next:p=>{this.bool=!1,console.log("get successful:",p),this.api=p,this.clients=this.api.client,this.litiges=this.api.litiges,console.log("Updated Medecines:",this.litiges),console.log("Updated Patient Names:",this.searchTerm)},error:p=>{console.error("Post error:",p)}})}};let _=f;return f.\u0275fac=function(r){return new(r||f)(t.Y36(c.F0),t.Y36(O.eN),t.Y36(c.gz))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-dispute"]],inputs:{link:"link"},standalone:!0,features:[t.jDz],decls:14,vars:7,consts:[[1,"login-card"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","names","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"mad-card"],["mat-button","",3,"click"],[1,"card"],["mat-icon-button","",3,"click"]],template:function(r,p){if(1&r&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"names"),t.qZA(),t._UZ(5,"input",3),t.TgZ(6,"mat-autocomplete",null,4),t.YNc(8,C,2,2,"mat-option",5),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return p.transfer()}),t._uU(11,"search"),t.qZA()(),t.YNc(12,y,9,4,"div",7),t.YNc(13,U,5,0,"div",8),t.qZA()),2&r){const T=t.MAs(7);t.xp6(5),t.Q6J("formControl",p.myControl)("matAutocomplete",T),t.xp6(3),t.Q6J("ngForOf",t.lcZ(9,5,p.filtered)),t.xp6(4),t.Q6J("ngForOf",p.clients),t.xp6(1),t.Q6J("ngIf",p.bool)}},dependencies:[m.ez,m.sg,m.O5,m.Ov,m.uU,n.u5,n._Y,n.Fj,n.JJ,n.JL,n.F,n.UX,n.oH,e.QW,e.a8,e.hq,e.dn,e.dk,e.$j,e.n5,v.lN,v.KE,v.hX,h.c,h.Nt,D.Bb,D.XC,u.ey,D.ZL,g.ot,g.lW,g.RK,o.Ps,o.Hw],styles:[".login-card[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:30px}.login[_ngcontent-%COMP%]{width:100%}.mad-card[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px}.card[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),_})()},9012:(x,E,i)=>{i.d(E,{a:()=>e});var m=i(4650),n=i(529);let e=(()=>{const h=class{constructor(g){this.http=g}getline(){return this.http.get("http://127.0.0.1:5000/line")}getpie(){return this.http.get("http://127.0.0.1:5000/pie/sum")}getlineid(g){return this.http.get(`http://127.0.1:5000/line/${g}`)}getpieid(g){return this.http.get(`http://127.0.1:5000/pie/sum/${g}`)}};let v=h;return h.\u0275fac=function(o){return new(o||h)(m.LFG(n.eN))},h.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),v})()},9089:(x,E,i)=>{i.d(E,{b:()=>g});var m=i(6205),n=i(6895),e=i(4650),v=i(529);const h=["chart"];function D(o,l){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"apx-chart",2),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.Q6J("series",a.chartOptions.series)("chart",a.chartOptions.chart)("dataLabels",a.chartOptions.dataLabels)("plotOptions",a.chartOptions.plotOptions)("yaxis",a.chartOptions.yaxis)("xaxis",a.chartOptions.xaxis)("legend",a.chartOptions.legend)("colors",a.chartOptions.colors)("grid",a.chartOptions.grid)}}let g=(()=>{const l=class{constructor(t){this.http=t,this.invoice=[],this.invoices=[]}set apiData(t){console.log("API URL set:",t),this.http.get(t).subscribe({next:c=>{this.api=c,this.invoice=this.api.invoices,console.log("Invoices data:",this.invoice),this.column()},error:c=>{console.error("HTTP error loading invoices:",c),this.invoice=[],this.invoices=[]}})}column(){this.chartOptions={series:[{name:"distibuted",data:this.invoice.map(t=>t.count)}],chart:{height:350,type:"bar",events:{click:function(t,c,O){}}},colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#546E7A","#26a69a","#D10CE8"],plotOptions:{bar:{columnWidth:"45%",distributed:!0}},dataLabels:{enabled:!1},legend:{show:!1},grid:{show:!1},xaxis:{categories:this.invoice.map(t=>t.name),labels:{style:{colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#546E7A","#26a69a","#D10CE8"],fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#8e8da4",fontSize:"12px"}}}}}};let o=l;return l.\u0275fac=function(c){return new(c||l)(e.Y36(v.eN))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-column"]],viewQuery:function(c,O){if(1&c&&e.Gf(h,5),2&c){let u;e.iGM(u=e.CRH())&&(O.chart=u.first)}},inputs:{apiData:"apiData"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["id","chart",4,"ngIf"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","legend","colors","grid"]],template:function(c,O){1&c&&e.YNc(0,D,2,9,"div",0),2&c&&e.Q6J("ngIf",O.chartOptions)},dependencies:[m.X,m.x,n.ez,n.O5],styles:["#chart[_ngcontent-%COMP%]{max-width:650px;margin:35px auto}"]}),o})()},5544:(x,E,i)=>{i.d(E,{y:()=>v});var m=i(6205),n=i(4650),e=i(529);let v=(()=>{const D=class{constructor(o,l){this.Http=o,this.cdr=l,this.dataSeries=[]}ngOnChanges(o){o.dataSeries&&Array.isArray(this.dataSeries)&&this.dataSeries.length>0&&(console.log("Received new datay:",this.dataSeries),this.dataSeries=this.misiingDates(this.dataSeries),this.cdr.detectChanges(),this.initChartData())}misiingDates(o){const l=new Map(o.map(u=>[u.data,u.value])),a=o.map(u=>new Date(u.data)),t=new Date(Math.min(...a.map(u=>u.getTime()))),c=new Date(Math.max(...a.map(u=>u.getTime()))),O=[];for(let u=t;u<=c;u.setDate(u.getDate()+1)){const C=u.toISOString().split("T")[0];O.push({data:C,value:l.get(C)||0})}return console.log("dataSeries after adding missing dates:",O),O}initChartData(){const o=this.dataSeries.map(l=>[Date.parse(l.data),l.value]);this.series=[{name:"desputes per day",data:o}],this.chart={type:"area",stacked:!1,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},this.dataLabels={enabled:!1},this.markers={size:0},this.title={text:"Dispute Over Time",align:"left"},this.fill={type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},this.yaxis={labels:{formatter:function(l){return l.toString()}},title:{text:"Value"}},this.xaxis={type:"datetime",tickAmount:0},this.tooltip={shared:!1,y:{formatter:function(l){return l.toString()}}}}};let h=D;return D.\u0275fac=function(l){return new(l||D)(n.Y36(e.eN),n.Y36(n.sBO))},D.\u0275cmp=n.Xpm({type:D,selectors:[["app-line"]],inputs:{dataSeries:"dataSeries"},standalone:!0,features:[n.TTD,n.jDz],decls:1,vars:10,consts:[[3,"series","chart","dataLabels","markers","title","fill","yaxis","xaxis","tooltip","autoUpdateSeries"]],template:function(l,a){1&l&&n._UZ(0,"apx-chart",0),2&l&&n.Q6J("series",a.series)("chart",a.chart)("dataLabels",a.dataLabels)("markers",a.markers)("title",a.title)("fill",a.fill)("yaxis",a.yaxis)("xaxis",a.xaxis)("tooltip",a.tooltip)("autoUpdateSeries",!0)},dependencies:[m.X,m.x]}),h})()},4089:(x,E,i)=>{i.d(E,{R:()=>D});var m=i(6205),n=i(3546),e=i(4650),v=i(529),h=i(6885);let D=(()=>{const o=class{constructor(a,t,c){this.http=a,this.cdr=t,this.socket=c,this.dispute=[],this.options={}}ngOnChanges(a){a.yes&&Array.isArray(this.yes)&&this.yes.length>0&&(this.options={series:this.yes.map(t=>t.count),chart:{width:500,type:"pie"},labels:this.yes.map(t=>t.litiges),responsive:[{breakpoint:340,options:{chart:{width:300},legend:{position:"bottom"}}}]})}};let g=o;return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.eN),e.Y36(e.sBO),e.Y36(h.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pie"]],inputs:{yes:"yes"},standalone:!0,features:[e.TTD,e.jDz],decls:6,vars:4,consts:[[3,"series","chart","labels","responsive"]],template:function(t,c){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"Percentage of Disputes"),e.qZA()(),e.TgZ(4,"mat-card-content"),e._UZ(5,"apx-chart",0),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("series",c.options.series)("chart",c.options.chart)("labels",c.options.labels)("responsive",c.options.responsive))},dependencies:[m.X,m.x,n.QW,n.a8,n.dn,n.dk,n.n5]}),g})()}}]);